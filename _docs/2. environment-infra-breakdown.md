# Helabooking App - Environments & Infrastructure Breakdown

This document provides an overview of the different environments and infrastructure components used in the Helabooking application project, and how they are structured within the Terraform and Ansible codebase.

## Overview

- The Helabooking application is deployed across multiple environments to facilitate development, testing, and production.
- These include multiple Kubernetes clusters hosted on both on-premises and cloud platforms.
- All the clusters are managed using Infrastructure as Code (IaC) principles, primarily utilizing Terraform for provisioning and managing in cluster resources and AWS Cloud services.
- Ansible is used for setting up and configuring the Cloud Kubernetes clusters running on EC2 instances.
- Each environment has its own dedicated branch in the Git repository to isolate changes and configurations.

## Environment Setup

| Environment             | Hosted on                     | Branches                                                                                    | Tools            | Infrastructure as Code | Cluster Provisioning |
| ----------------------- | ----------------------------- | ------------------------------------------------------------------------------------------- | ---------------- | ---------------------- | -------------------- |
| On-Premises K8s Cluster | Raspberry Pi & Samsung Laptop | - `on-prem-management` (management), - `dev` (env-dev)                                      | k3s + containerd | Terraform              | k3s Script           |
| Cloud K8s Cluster       | AWS EC2 Instances             | - `cloud-management` (management), - `stag` (env-stage), - `main` (env-prod-a & env-prod-b) | Kubeadm + Docker | Terraform              | Ansible              |

## Cluster Resources Breakdown

| Cluster     | Namespace    | Workloads                                                                                                          |
| ----------- | ------------ | ------------------------------------------------------------------------------------------------------------------ |
| On-Premises | management   | Jenkins, Harbor, Traefik, CertManager, Argocd, FluentBit                                                           |
| On-Premises | istio-system | Istio Control Plane, Istio Ingress Gateway, Kiali Dashboard                                                        |
| On-Premises | env-dev      | Helabooking Application (Frontend + Backend Microservices + Databases), OpenSearch, Prometheus & Grafana, RabbitMQ |
|             |              |                                                                                                                    |
| Cloud       | management   | Jenkins, Harbor, Traefik, CertManager, Argocd, FluentBit                                                           |
| Cloud       | istio-system | Istio Control Plane, Istio Ingress Gateway, Kiali Dashboard                                                        |
| Cloud       | env-stag     | Helabooking Application (Frontend + Backend Microservices + Databases), OpenSearch, Prometheus & Grafana, RabbitMQ |
| Cloud       | env-prod-a   | Helabooking Application (Frontend + Backend Microservices + Databases), OpenSearch, Prometheus & Grafana, RabbitMQ |
| Cloud       | env-prod-b   | Helabooking Application (Frontend + Backend Microservices + Databases), OpenSearch, Prometheus & Grafana, RabbitMQ |

> Note: Each application environment (dev, stag, prod-a, prod-b) has its own dedicated Opensearch Cluster and Grafana + Prometheus setup for monitoring and logging.

## Extra Notes:

- More details on how the repository is structured can be found in the [Module Breakdown](./2.%20module-breakdown.md) document.
