# Getting Started Guide

Welcome to the HelaBooking Infrastructure Repository! This guide will help you set up your local development environment, configure necessary tools, and get started with managing the infrastructure using Terraform with S3 remote state.

## Prerequisites

Before you begin, ensure you have the following installed on your local machine
(Recommend using WSL for Windows users. Install Terraform and kubectl inside WSL):

- [Git](https://git-scm.com/downloads)
- [Terraform](https://www.terraform.io/downloads.html)
- [kubectl](https://kubernetes.io/docs/tasks/tools/install-kubectl/)

## Step 1: Setup Cluster Access

1. Clone the repository to your local machine. Place the following files in the given locations from the project Google Drive shared folder (`repo-secure-files`):

   - `kube-config.yaml` file in the `/on-prem/cluster-config/` directory. (Create the directory `cluster-config` if it doesn't exist)
   - `dns-secrets/secrets.tf` file in the `/on-prem/cluster-templates/dns-record/secrets.tf` directory.
   - `management-secrets/secrets.tf` file in the `/on-prem/management/secrets.tf` directory.

2. Open the repo folder in VS Code. Then open the WSL terminal inside VS Code which will open the project folder in WSL.
3. Then follow the steps in `## Terraform & Kubectl Setup` section of the [Node Setup Guide](./1.%20node-setup.md) to set up Terraform and kubectl.

## Step 2: Connect to the Cluster

1. Follow the steps `## Step 2: Access Using Twingate` section of the [Twingate Setup Guide](./3.%20twingate-setup.md) to set up Twingate and access the cluster securely.
2. Verify kubectl access to the cluster by running: `kubectl get nodes`. You should see two nodes listed (`pico-node` and `galaxy-node`).
3. To use terraform, first need to setup `aws-cli` as mentioned in the `Prerequisite` part of the `### Remote State Management` section of the [Node Setup Guide](./1.%20node-setup.md).
4. After setting up `aws-cli` with the temporary credentials, navigate to a location (`management`, `env-dev`, etc.) in the `/on-prem/` directory and run the following command to see whether the terraform is working correctly:

   ```bash
   terraform init
   terraform plan
   ```

5. You are now ready to manage the HelaBooking infrastructure using Terraform! Follow the rest of the documentation for more details on the cluster setup and management.

## Important Links

Password for the below UIs can be found in the `repo-secure-files` folder in the project Google Drive.

- Rancher UI (Not Deployed): [https://rancher.management.ezbooking.lk](https://rancher.management.ezbooking.lk)
- Longhorn UI (Only through Twingate): [https://longhorn.management.ezbooking.lk](https://longhorn.management.ezbooking.lk)
- NGINX Proxy: [https://proxy.management.ezbooking.lk](https://proxy.management.ezbooking.lk)
- Jenkins UI: [https://jenkins.management.ezbooking.lk](https://jenkins.management.ezbooking.lk)
