# Module Breakdown

This document provides a detailed breakdown of the various modules in each kubernetes cluster, explaining their purpose and functionality.

## Templates Directory

Define reusable Terraform templates for common Kubernetes resources (e.g., deployments, services, helm charts, etc). These templates are specific to each cluster (on-prem and cloud).

    - cluster-templates
        - deployment
            - deployment.yaml
            - variables.tf
        - service
            - service.yaml
            - variables.tf
        - helm-chart
            - helm-chart.yaml
            - variables.tf
        - manifest
            - manifest.yaml
            - variables.tf
        - pv-claim
            - pv-claim.yaml
            - variables.tf
        - dns-record
            - main.tf
            - secrets.tf     (Get this from the S3 bucket named `group9-secrets-bucket`)
            - dns-record.tf
            - variables.tf
    * Important: To remove a DNS Module in an env, first run `terraform destroy -target=module.<module_name>`, then remove from the code. Otherwise errors will occur

## Environments

### Important Notes:

- Each cluster has multiple environments defined under their respective directories.
- Each environment has its own independent Terraform state management.

### Environment-specific configurations and resources (e.g., namespaces, resources).

Each cluster has the following namespace structure:

    - management (shared services within the cluster)
        - main.tf: Entry point for the environment module with independent state management.
        - deployments.tf: Define shared kubernetes deployments and Helm chart deployments for the cluster.
        - services.tf: Define shared kubernetes services for the cluster.
        - networks.tf: Define shared kubernetes namespaces and network policies.
        - dns-records.tf: Define shared DNS records for the environment.
        - variables.tf: Define input variables for the environment.
        - manifests.tf: Define custom manifests for the environment.
        - pv-claims.tf: Define persistent volume claims for the environment.
        - secrets.tf: Define secrets required for the environment.

    - env-dev
        - main.tf: Entry point for the environment module with independent state management.
        - deployments.tf: Define project related deployments and Helm chart deployments for the cluster.
        - services.tf: Define project related services for the cluster.
        - networks.tf: Define project related namespaces and network policies.
        - dns-records.tf: Define project related DNS records for the environment.
        - variables.tf: Define input variables for the environment.
        - manifests.tf: Define custom manifests for the environment.
        - pv-claims.tf: Define persistent volume claims for the environment.
        - secrets.tf: Define secrets required for the environment.
